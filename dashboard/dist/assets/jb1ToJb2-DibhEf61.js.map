{"version":3,"file":"jb1ToJb2-DibhEf61.js","sources":["../../node_modules/@jbrowse/plugin-legacy-jbrowse/esm/JBrowse1Connection/jb1ToJb2.js"],"sourcesContent":["import { objectHash } from '@jbrowse/core/util';\nimport { openLocation } from '@jbrowse/core/util/io';\nimport { UNKNOWN, UNSUPPORTED, generateUnknownTrackConf, generateUnsupportedTrackConf, guessAdapter, guessTrackType, } from '@jbrowse/core/util/tracks';\nexport function convertTrackConfig(jb1TrackConfig, dataRoot, sequenceAdapter) {\n    var _a, _b, _c, _d, _e;\n    const jb2TrackConfig = {\n        trackId: objectHash(jb1TrackConfig),\n        name: jb1TrackConfig.key || jb1TrackConfig.label,\n    };\n    const description = jb1TrackConfig.metadata &&\n        (jb1TrackConfig.metadata.description || jb1TrackConfig.metadata.Description);\n    if (description) {\n        jb2TrackConfig.description = description;\n    }\n    const category = jb1TrackConfig.category || ((_a = jb1TrackConfig.metadata) === null || _a === void 0 ? void 0 : _a.category);\n    jb2TrackConfig.category = category ? category.split(/\\s*\\/\\s*/) : [];\n    const { storeClass } = jb1TrackConfig;\n    if (!jb1TrackConfig.urlTemplate) {\n        if (!(storeClass === null || storeClass === void 0 ? void 0 : storeClass.endsWith('FromConfig'))) {\n            const trackIdentifier = jb1TrackConfig.key || jb1TrackConfig.label;\n            console.warn(`Could not import JBrowse1 track \"${trackIdentifier}\" because it does not have a \"urlTemplate\" or is not a \"FromConfig\" track`);\n            return generateUnsupportedTrackConf(jb2TrackConfig.name, trackIdentifier, jb2TrackConfig.category);\n        }\n        return generateFromConfigTrackConfig(jb1TrackConfig, jb2TrackConfig);\n    }\n    const resolveUrlTemplate = (urlTemplate) => {\n        return new URL(urlTemplate, `${dataRoot}/`).href\n            .replaceAll(/%7B/gi, '{')\n            .replaceAll(/%7D/gi, '}');\n    };\n    const urlTemplate = resolveUrlTemplate(jb1TrackConfig.urlTemplate);\n    if (storeClass) {\n        if (storeClass === 'JBrowse/Store/SeqFeature/BAM') {\n            const adapter = {\n                type: 'BamAdapter',\n                bamLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            if (jb1TrackConfig.baiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.baiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                };\n            }\n            else if (jb1TrackConfig.csiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.csiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                    indexType: 'CSI',\n                };\n            }\n            else {\n                adapter.index = {\n                    location: { uri: `${urlTemplate}.bai`, locationType: 'UriLocation' },\n                };\n            }\n            return {\n                ...jb2TrackConfig,\n                type: 'AlignmentsTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/CRAM') {\n            const adapter = {\n                type: 'CramAdapter',\n                cramLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                sequenceAdapter,\n            };\n            adapter.craiLocation = jb1TrackConfig.craiUrlTemplate\n                ? {\n                    uri: resolveUrlTemplate(jb1TrackConfig.craiUrlTemplate),\n                    locationType: 'UriLocation',\n                }\n                : {\n                    uri: `${urlTemplate}.crai`,\n                    locationType: 'UriLocation',\n                };\n            return {\n                ...jb2TrackConfig,\n                type: 'AlignmentsTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/NCList') {\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter: {\n                    type: 'NCListAdapter',\n                    rootUrlTemplate: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/BigWig' ||\n            storeClass === 'JBrowse/Store/BigWig') {\n            if ((_b = jb1TrackConfig.type) === null || _b === void 0 ? void 0 : _b.endsWith('XYPlot')) {\n                jb2TrackConfig.defaultRendering = 'xyplot';\n            }\n            else if ((_c = jb1TrackConfig.type) === null || _c === void 0 ? void 0 : _c.endsWith('Density')) {\n                jb2TrackConfig.defaultRendering = 'density';\n            }\n            return {\n                ...jb2TrackConfig,\n                type: 'QuantitativeTrack',\n                adapter: {\n                    type: 'BigWigAdapter',\n                    bigWigLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/VCFTabix') {\n            const adapter = {\n                type: 'VcfTabixAdapter',\n                vcfGzLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            if (jb1TrackConfig.tbiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.tbiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                };\n            }\n            else if (jb1TrackConfig.csiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.csiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                    indexType: 'CSI',\n                };\n            }\n            else {\n                adapter.index = {\n                    location: { uri: `${urlTemplate}.tbi`, locationType: 'UriLocation' },\n                };\n            }\n            return {\n                ...jb2TrackConfig,\n                type: 'VariantTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/VCFTribble') {\n            return generateUnsupportedTrackConf(jb2TrackConfig.name, `VCFTribble (${urlTemplate})`, jb2TrackConfig.category);\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/GFF3') {\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter: {\n                    type: 'Gff3Adapter',\n                    gffLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/BigBed') {\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter: {\n                    type: 'BigBedAdapter',\n                    bigBedLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/GFF3Tabix') {\n            const adapter = {\n                type: 'Gff3TabixAdapter',\n                gffGzLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            if (jb1TrackConfig.tbiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.tbiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                };\n            }\n            else if (jb1TrackConfig.csiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.csiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                    indexType: 'CSI',\n                };\n            }\n            else {\n                adapter.index = {\n                    location: { uri: `${urlTemplate}.tbi`, locationType: 'UriLocation' },\n                };\n            }\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/BED') {\n            return generateUnsupportedTrackConf(jb2TrackConfig.name, `BED (${urlTemplate})`, jb2TrackConfig.category);\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/BEDTabix') {\n            const adapter = {\n                type: 'BedTabixAdapter',\n                bedGzLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            if (jb1TrackConfig.tbiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.tbiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                };\n            }\n            else if (jb1TrackConfig.csiUrlTemplate) {\n                adapter.index = {\n                    location: {\n                        uri: resolveUrlTemplate(jb1TrackConfig.csiUrlTemplate),\n                        locationType: 'UriLocation',\n                    },\n                    indexType: 'CSI',\n                };\n            }\n            else {\n                adapter.index = {\n                    location: { uri: `${urlTemplate}.tbi`, locationType: 'UriLocation' },\n                };\n            }\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/GTF') {\n            return {\n                ...jb2TrackConfig,\n                type: 'FeatureTrack',\n                adapter: {\n                    type: 'GtfAdapter',\n                    gtfLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/StaticChunked' ||\n            storeClass === 'JBrowse/Store/Sequence/StaticChunked') {\n            return generateUnsupportedTrackConf(jb2TrackConfig.name, `StaticChunked (${urlTemplate})`, jb2TrackConfig.category);\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/UnindexedFasta') {\n            return generateUnsupportedTrackConf(jb2TrackConfig.name, `UnindexedFasta (${urlTemplate})`, jb2TrackConfig.category);\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/IndexedFasta') {\n            const adapter = {\n                type: 'IndexedFastaAdapter',\n                fastaLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            adapter.faiLocation = jb1TrackConfig.faiUrlTemplate\n                ? {\n                    uri: resolveUrlTemplate(jb1TrackConfig.faiUrlTemplate),\n                    locationType: 'UriLocation',\n                }\n                : {\n                    uri: `${urlTemplate}.fai`,\n                    locationType: 'UriLocation',\n                };\n            return {\n                ...jb2TrackConfig,\n                type: 'SequenceTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/BgzipIndexedFasta') {\n            const adapter = {\n                type: 'BgzipFastaAdapter',\n                fastaLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n            };\n            adapter.faiLocation = jb1TrackConfig.faiUrlTemplate\n                ? {\n                    uri: resolveUrlTemplate(jb1TrackConfig.faiUrlTemplate),\n                    locationType: 'UriLocation',\n                }\n                : {\n                    uri: `${urlTemplate}.fai`,\n                    locationType: 'UriLocation',\n                };\n            adapter.gziLocation = jb1TrackConfig.gziUrlTemplate\n                ? {\n                    uri: resolveUrlTemplate(jb1TrackConfig.gziUrlTemplate),\n                    locationType: 'UriLocation',\n                }\n                : {\n                    uri: `${urlTemplate}.gzi`,\n                    locationType: 'UriLocation',\n                };\n            return {\n                ...jb2TrackConfig,\n                type: 'ReferenceSequenceTrack',\n                adapter,\n            };\n        }\n        if (storeClass === 'JBrowse/Store/SeqFeature/TwoBit') {\n            return {\n                ...jb2TrackConfig,\n                type: 'ReferenceSequenceTrack',\n                adapter: {\n                    type: 'TwoBitAdapter',\n                    twoBitLocation: { uri: urlTemplate, locationType: 'UriLocation' },\n                },\n            };\n        }\n    }\n    jb2TrackConfig.adapter = guessAdapter({ uri: urlTemplate, locationType: 'UriLocation' }, undefined, urlTemplate);\n    if (jb2TrackConfig.adapter.type === UNSUPPORTED) {\n        return generateUnsupportedTrackConf(jb2TrackConfig.name, urlTemplate, jb2TrackConfig.category);\n    }\n    if (jb2TrackConfig.adapter.type === UNKNOWN) {\n        return generateUnknownTrackConf(jb2TrackConfig.name, urlTemplate, jb2TrackConfig.category);\n    }\n    jb2TrackConfig.type = guessTrackType(jb2TrackConfig.adapter.type);\n    if (jb2TrackConfig.type === 'QuantitativeTrack') {\n        if ((_d = jb1TrackConfig.type) === null || _d === void 0 ? void 0 : _d.endsWith('XYPlot')) {\n            jb2TrackConfig.defaultRendering = 'xyplot';\n        }\n        else if ((_e = jb1TrackConfig.type) === null || _e === void 0 ? void 0 : _e.endsWith('Density')) {\n            jb2TrackConfig.defaultRendering = 'density';\n        }\n    }\n    return jb2TrackConfig;\n}\nfunction generateFromConfigTrackConfig(jb1TrackConfig, jb2TrackConfig) {\n    const jb1Features = jb1TrackConfig.features || [];\n    const jb2Features = jb1Features.map((feature) => {\n        const jb2Feature = JSON.parse(JSON.stringify(feature));\n        jb2Feature.refName = feature.seq_id;\n        jb2Feature.uniqueId = `${feature.seq_id}:${feature.start}-${feature.end}:${feature.name || ''}`;\n        return jb2Feature;\n    });\n    jb2TrackConfig.adapter = {\n        type: 'FromConfigAdapter',\n        features: jb2Features,\n    };\n    jb2TrackConfig.type = 'FeatureTrack';\n    return jb2TrackConfig;\n}\nexport async function createRefSeqsAdapter(refSeqs) {\n    if (typeof refSeqs === 'string') {\n        refSeqs = {\n            url: refSeqs,\n        };\n    }\n    if (refSeqs.url) {\n        if (/.fai$/.exec(refSeqs.url)) {\n            return {\n                type: 'IndexedFastaAdapter',\n                fastaLocation: {\n                    uri: refSeqs.url.slice(0, -4),\n                    locationType: 'UriLocation',\n                },\n                faiLocation: {\n                    uri: refSeqs.url,\n                    locationType: 'UriLocation',\n                },\n            };\n        }\n        if (/.2bit$/.exec(refSeqs.url)) {\n            return {\n                type: 'TwoBitAdapter',\n                twoBitLocation: { uri: refSeqs.url, locationType: 'UriLocation' },\n            };\n        }\n        if (/.fa$/.exec(refSeqs.url)) {\n            throw new Error('Unindexed FASTA adapter not available');\n        }\n        if (/.sizes/.exec(refSeqs.url)) {\n            throw new Error('chromosome SIZES adapter not available');\n        }\n        const refSeqsJson = await openLocation({\n            uri: refSeqs.url,\n            locationType: 'UriLocation',\n        }).readFile('utf8');\n        const refSeqsData = JSON.parse(refSeqsJson);\n        return refSeqAdapterFromConfig(refSeqsData);\n    }\n    if ('data' in refSeqs) {\n        return refSeqAdapterFromConfig(refSeqs.data || []);\n    }\n    throw new Error(`Could not determine adapter for JBrowse1 refSeqs: ${refSeqs.url || JSON.stringify(refSeqs)}`);\n}\nfunction refSeqAdapterFromConfig(refSeqsData) {\n    const features = refSeqsData.map((refSeq) => ({\n        refName: refSeq.name,\n        uniqueId: refSeq.name,\n        start: refSeq.start,\n        end: refSeq.end,\n    }));\n    return {\n        type: 'FromConfigAdapter',\n        features,\n    };\n}\n"],"names":["convertTrackConfig","jb1TrackConfig","dataRoot","sequenceAdapter","_a","_b","_c","_d","_e","jb2TrackConfig","objectHash","description","category","storeClass","trackIdentifier","generateUnsupportedTrackConf","generateFromConfigTrackConfig","resolveUrlTemplate","urlTemplate","adapter","guessAdapter","UNSUPPORTED","UNKNOWN","generateUnknownTrackConf","guessTrackType","jb2Features","feature","jb2Feature"],"mappings":"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","x_google_ignoreList":[0]}