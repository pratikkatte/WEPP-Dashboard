{"version":3,"file":"getMultiVariantFeaturesAutorun-qMYn4TKl.js","sources":["../../node_modules/@jbrowse/plugin-variants/esm/getMultiVariantFeaturesAutorun.js"],"sourcesContent":["import { SimpleFeature, getContainingView, getSession, } from '@jbrowse/core/util';\nimport { isAbortException } from '@jbrowse/core/util/aborting';\nimport { getRpcSessionId } from '@jbrowse/core/util/tracks';\nimport { autorun } from 'mobx';\nimport { addDisposer, isAlive } from 'mobx-state-tree';\nexport function getMultiVariantFeaturesAutorun(self) {\n    addDisposer(self, autorun(async () => {\n        try {\n            const view = getContainingView(self);\n            if (!view.initialized || !self.statsReadyAndRegionNotTooLarge) {\n                return;\n            }\n            const { rpcManager } = getSession(self);\n            const { sources, mafFilter, adapterConfig } = self;\n            if (!sources) {\n                return;\n            }\n            const sessionId = getRpcSessionId(self);\n            const features = (await rpcManager.call(sessionId, 'MultiVariantGetSimplifiedFeatures', {\n                regions: view.dynamicBlocks.contentBlocks,\n                sources,\n                mafFilter,\n                sessionId,\n                adapterConfig,\n            }));\n            if (isAlive(self)) {\n                self.setFeatures(features.map(f => new SimpleFeature(f)));\n            }\n        }\n        catch (e) {\n            if (!isAbortException(e) && isAlive(self)) {\n                console.error(e);\n                getSession(self).notifyError(`${e}`, e);\n            }\n        }\n    }, { delay: 1000 }));\n}\n"],"names":["getMultiVariantFeaturesAutorun","self","addDisposer","autorun","view","getContainingView","rpcManager","getSession","sources","mafFilter","adapterConfig","sessionId","getRpcSessionId","features","isAlive","f","SimpleFeature","e","isAbortException"],"mappings":"+GAKO,SAASA,EAA+BC,EAAM,CACjDC,EAAYD,EAAME,EAAQ,SAAY,CAClC,GAAI,CACA,MAAMC,EAAOC,EAAiB,kBAACJ,CAAI,EACnC,GAAI,CAACG,EAAK,aAAe,CAACH,EAAK,+BAC3B,OAEJ,KAAM,CAAE,WAAAK,CAAU,EAAKC,EAAU,WAACN,CAAI,EAChC,CAAE,QAAAO,EAAS,UAAAC,EAAW,cAAAC,CAAe,EAAGT,EAC9C,GAAI,CAACO,EACD,OAEJ,MAAMG,EAAYC,EAAe,gBAACX,CAAI,EAChCY,EAAY,MAAMP,EAAW,KAAKK,EAAW,oCAAqC,CACpF,QAASP,EAAK,cAAc,cAC5B,QAAAI,EACA,UAAAC,EACA,UAAAE,EACA,cAAAD,CAChB,CAAa,EACGI,EAAQb,CAAI,GACZA,EAAK,YAAYY,EAAS,IAAIE,GAAK,IAAIC,EAAa,cAACD,CAAC,CAAC,CAAC,CAExE,OACeE,EAAG,CACF,CAACC,EAAAA,iBAAiBD,CAAC,GAAKH,EAAQb,CAAI,IACpC,QAAQ,MAAMgB,CAAC,EACfV,EAAU,WAACN,CAAI,EAAE,YAAY,GAAGgB,CAAC,GAAIA,CAAC,EAEtD,CACA,EAAO,CAAE,MAAO,GAAI,CAAE,CAAC,CACvB","x_google_ignoreList":[0]}