{"version":3,"file":"ExportSvgDialog-GGURk1cK.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/ExportSvgDialog.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Dialog, ErrorMessage } from '@jbrowse/core/ui';\nimport { getSession, useLocalStorage } from '@jbrowse/core/util';\nimport { Button, Checkbox, CircularProgress, DialogActions, DialogContent, FormControlLabel, MenuItem, TextField, Typography, } from '@mui/material';\nfunction LoadingMessage() {\n    return (React.createElement(\"div\", null,\n        React.createElement(CircularProgress, { size: 20, style: { marginRight: 20 } }),\n        React.createElement(Typography, { display: \"inline\" }, \"Creating SVG\")));\n}\nfunction useSvgLocal(key, val) {\n    return useLocalStorage(`svg-${key}`, val);\n}\nfunction TextField2({ children, ...rest }) {\n    return (React.createElement(\"div\", null,\n        React.createElement(TextField, { ...rest }, children)));\n}\nexport default function ExportSvgDialog({ model, handleClose, }) {\n    const session = getSession(model);\n    const offscreenCanvas = typeof OffscreenCanvas !== 'undefined';\n    const [rasterizeLayers, setRasterizeLayers] = useState(offscreenCanvas);\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState();\n    const [filename, setFilename] = useSvgLocal('file', 'jbrowse.svg');\n    const [trackLabels, setTrackLabels] = useSvgLocal('tracklabels', 'offset');\n    const [themeName, setThemeName] = useSvgLocal('theme', session.themeName || 'default');\n    return (React.createElement(Dialog, { open: true, onClose: handleClose, title: \"Export SVG\" },\n        React.createElement(DialogContent, null,\n            error ? (React.createElement(ErrorMessage, { error: error })) : loading ? (React.createElement(LoadingMessage, null)) : null,\n            React.createElement(TextField2, { helperText: \"filename\", value: filename, onChange: event => {\n                    setFilename(event.target.value);\n                } }),\n            React.createElement(TextField2, { select: true, label: \"Track label positioning\", variant: \"outlined\", style: { width: 150 }, value: trackLabels, onChange: event => {\n                    setTrackLabels(event.target.value);\n                } },\n                React.createElement(MenuItem, { value: \"offset\" }, \"Offset\"),\n                React.createElement(MenuItem, { value: \"overlay\" }, \"Overlay\"),\n                React.createElement(MenuItem, { value: \"left\" }, \"Left\"),\n                React.createElement(MenuItem, { value: \"none\" }, \"None\")),\n            session.allThemes ? (React.createElement(TextField2, { select: true, label: \"Theme\", variant: \"outlined\", value: themeName, onChange: event => {\n                    setThemeName(event.target.value);\n                } }, Object.entries(session.allThemes()).map(([key, val]) => (React.createElement(MenuItem, { key: key, value: key }, val.name || '(Unknown name)'))))) : null,\n            offscreenCanvas ? (React.createElement(FormControlLabel, { control: React.createElement(Checkbox, { checked: rasterizeLayers, onChange: () => {\n                        setRasterizeLayers(val => !val);\n                    } }), label: \"Rasterize canvas based tracks? File may be much larger if this is turned off\" })) : (React.createElement(Typography, null, \"Note: rasterizing layers not yet supported in this browser, so SVG size may be large\"))),\n        React.createElement(DialogActions, null,\n            React.createElement(Button, { variant: \"contained\", color: \"secondary\", onClick: () => {\n                    handleClose();\n                } }, \"Cancel\"),\n            React.createElement(Button, { variant: \"contained\", color: \"primary\", type: \"submit\", onClick: async () => {\n                    setLoading(true);\n                    setError(undefined);\n                    try {\n                        await model.exportSvg({\n                            rasterizeLayers,\n                            filename,\n                            trackLabels,\n                            themeName,\n                        });\n                        handleClose();\n                    }\n                    catch (e) {\n                        console.error(e);\n                        setError(e);\n                    }\n                    finally {\n                        setLoading(false);\n                    }\n                } }, \"Submit\"))));\n}\n"],"names":["LoadingMessage","React","CircularProgress","Typography","useSvgLocal","key","val","useLocalStorage","TextField2","children","rest","TextField","ExportSvgDialog","model","handleClose","session","getSession","offscreenCanvas","rasterizeLayers","setRasterizeLayers","useState","loading","setLoading","error","setError","filename","setFilename","trackLabels","setTrackLabels","themeName","setThemeName","Dialog","DialogContent","ErrorMessage","event","MenuItem","FormControlLabel","Checkbox","DialogActions","Button","e"],"mappings":"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","x_google_ignoreList":[0]}