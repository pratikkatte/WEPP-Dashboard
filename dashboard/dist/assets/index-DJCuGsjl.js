import{o as m,a as s,R as e,D as L,d as g,e as F,B as p,M as T,c,bo as k,m as N,ba as D,V as j,X as M,b8 as O,af as x,v as f,bp as U}from"./index-wXfF-NZW.js";import{D as H}from"./Delete-B7d5ir2l.js";const R=m(function({adapterSelection:n,setAdapterSelection:o,adapterTypes:l}){return e.createElement(g,{value:n,variant:"outlined",select:!0,helperText:"Type of adapter to use",fullWidth:!0,onChange:t=>{o(t.target.value)}},l.map(t=>e.createElement(T,{key:t,value:t},t)))}),$=m(function({fastaLocation:n,setFastaLocation:o}){return e.createElement(e.Fragment,null,e.createElement(k,{severity:"warning",style:{margin:30}},"Note: use only relatively small files for this type, it is loaded into memory"),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:l=>{o(l)}})))}),G=m(function({fastaLocation:n,faiLocation:o,setFaiLocation:l,setFastaLocation:t}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:a=>{t(a)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:a=>{l(a)}})))}),q=m(function({fastaLocation:n,faiLocation:o,gziLocation:l,setFaiLocation:t,setGziLocation:a,setFastaLocation:r}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"fastaLocation",location:n,setLocation:i=>{r(i)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"faiLocation",location:o,setLocation:i=>{t(i)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"gziLocation",location:l,setLocation:i=>{a(i)}})))}),P=m(function({twoBitLocation:n,chromSizesLocation:o,setTwoBitLocation:l,setChromSizesLocation:t}){return e.createElement(e.Fragment,null,e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"twoBitLocation",location:n,setLocation:a=>{l(a)}})),e.createElement("div",null,e.createElement(c.FileSelector,{inline:!0,name:"chromSizesLocation (optional, can be added to speed up loading 2bit files with many contigs)",location:o,setLocation:a=>{t(a)}})))}),u={uri:""},I=["IndexedFastaAdapter","BgzipFastaAdapter","UnindexedFastaAdapter","TwoBitAdapter"],V=m(function({session:n,onClose:o}){const[l,t]=s.useState(""),[a,r]=s.useState(""),[i,E]=s.useState(I[0]),[d,b]=s.useState(u),[y,v]=s.useState(u),[S,w]=s.useState(u),[h,z]=s.useState(u),[C,B]=s.useState(u);return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement(g,{id:"assembly-name",label:"Assembly name",helperText:"The assembly name e.g. hg38",variant:"outlined",value:l,onChange:A=>{t(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-name"}}}),e.createElement(g,{id:"assembly-name",label:"Assembly display name",helperText:'(optional) A human readable display name for the assembly e.g. "Homo sapiens (hg38)"',variant:"outlined",value:a,onChange:A=>{r(A.target.value)},slotProps:{htmlInput:{"data-testid":"assembly-display-name"}}}),e.createElement(R,{adapterSelection:i,adapterTypes:I,setAdapterSelection:E}),i==="IndexedFastaAdapter"?e.createElement(G,{fastaLocation:d,faiLocation:y,setFaiLocation:v,setFastaLocation:b}):i==="UnindexedFastaAdapter"?e.createElement($,{fastaLocation:d,setFastaLocation:b}):i==="TwoBitAdapter"?e.createElement(P,{twoBitLocation:h,chromSizesLocation:C,setTwoBitLocation:z,setChromSizesLocation:B}):e.createElement(q,{fastaLocation:d,gziLocation:S,faiLocation:y,setFaiLocation:v,setGziLocation:w,setFastaLocation:b})),e.createElement(F,null,e.createElement(p,{variant:"contained",color:"primary",onClick:()=>{l===""?n.notify("Can't create an assembly without a name"):(o(),n.addAssembly({name:l,displayName:a,sequence:{type:"ReferenceSequenceTrack",trackId:`${l}-${performance.now()}`,adapter:i==="IndexedFastaAdapter"?{type:"IndexedFastaAdapter",fastaLocation:d,faiLocation:y}:i==="BgzipFastaAdapter"?{type:"BgzipFastaAdapter",fastaLocation:d,faiLocation:y,gziLocation:S}:i==="UnindexedFastaAdapter"?{type:"UnindexedFastaAdapter",fastaLocation:d}:{type:"TwoBitAdapter",twoBitLocation:h,chromSizesLocation:C}}}),n.notify(`Added "${l}"`,"success"))}},"Submit"),e.createElement(p,{variant:"contained",color:"secondary",onClick:()=>{o()}},"Cancel")))}),W=N()({container:{overflow:"auto",maxHeight:600}}),X=m(function({assembly:n,onClose:o}){const{classes:l}=W();return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement("div",{className:l.container},n?e.createElement(D,{model:{target:n}}):e.createElement("div",null,"No assembly"))),e.createElement(F,null,e.createElement(p,{variant:"contained",onClick:()=>{o()}},"Back")))}),J=j(M.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Create"),K=m(function({onEditAssembly:n,onAddAssembly:o,onClose:l,session:t}){return e.createElement(e.Fragment,null,e.createElement(L,null,e.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.createElement(O,{rowHeight:25,columnHeaderHeight:35,hideFooter:t.assemblies.length<25,rows:t.assemblies.map(a=>({id:f.readConfObject(a,"name"),name:f.readConfObject(a,"name"),displayName:f.readConfObject(a,"displayName"),aliases:f.readConfObject(a,"aliases"),assembly:a})),columns:[{field:"name"},{field:"displayName"},{field:"aliases"},{field:"actions",renderCell:({row:a})=>{const{assembly:r,name:i}=a,E=t.sessionAssemblies.includes(r)?!0:t.adminMode;return e.createElement(e.Fragment,null,e.createElement(x,{onClick:()=>{n(r)}},e.createElement(J,null)),e.createElement(x,{"data-testid":`${i}-delete`,disabled:!E,onClick:()=>{E&&(t.removeAssembly?t.removeAssembly(i):t.notify("Unable to find removeAssembly function"))}},e.createElement(H,null)))}}]}))),e.createElement(F,null,e.createElement(p,{color:"secondary",variant:"contained",onClick:()=>{l()}},"Close"),e.createElement(p,{variant:"contained",startIcon:e.createElement(U,null),onClick:()=>{o()}},"Add new assembly")))}),Z=m(function({session:n,onClose:o}){const[l,t]=s.useState(!1),[a,r]=s.useState();return e.createElement(c.Dialog,{open:!0,title:"Assembly manager",onClose:()=>{o()}},a?e.createElement(X,{assembly:a,onClose:()=>{r(void 0)}}):l?e.createElement(V,{session:n,onClose:()=>{t(!1)}}):e.createElement(K,{session:n,onClose:()=>{o()},onAddAssembly:()=>{t(!0)},onEditAssembly:i=>{r(i)}}))});export{Z as default};
//# sourceMappingURL=index-DJCuGsjl.js.map
