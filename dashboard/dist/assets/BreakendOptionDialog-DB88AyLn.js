import{u as y,o as x,a as u,X as n,c as b,D as v,e as j,B as w,j as C,m as S,i as N,C as P}from"./index-BF7YmVSy.js";function R({f1:t,f2:s,view:a}){const{assemblyName:o}=a.displayedRegions[0],{assemblyManager:m}=y.getSession(a),i=m.get(o);if(!i)throw new Error(`assembly ${o} not found`);if(!i.regions)throw new Error(`assembly ${o} regions not loaded`);const c=i.regions.find(d=>d.refName===t.refName),p=i.regions.find(d=>d.refName===s.refName);if(!c||!p)throw new Error("unable to find the refName for the top or bottom of the breakpoint view");const e=[{...c},{...c}],k=[{...p},{...p}],r=t.strand===1?t.end:t.start,f=s.strand===1?s.start:s.end;e[0].end=r,e[1].start=r+1,k[0].end=f,k[1].start=f+1;const l=10;return{type:"BreakpointSplitView",views:[{type:"LinearGenomeView",displayedRegions:e,hideHeader:!0,bpPerPx:l,offsetPx:(c.start+r)/l},{type:"LinearGenomeView",displayedRegions:k,hideHeader:!0,bpPerPx:l,offsetPx:(p.start+f)/l}],displayName:"breakend split detail"}}const B=S()({block:{display:"block"}});function g(t){return t.map(({id:s,displays:a,...o})=>({...o,displays:a.map(({id:m,...i})=>i)}))}function h({checked:t,label:s,onChange:a}){const{classes:o}=B();return n.jsx(N,{className:o.block,control:n.jsx(P,{checked:t,onChange:a}),label:s})}const V=x(function({model:t,handleClose:s,f1:a,f2:o}){const[m,i]=u.useState(!0),[c,p]=u.useState(!0);return n.jsxs(b.Dialog,{open:!0,onClose:s,title:"Breakpoint split view options",children:[n.jsxs(v,{children:[n.jsx(h,{checked:m,onChange:e=>i(e.target.checked),label:"Copy tracks into the new view"}),n.jsx(h,{checked:c,onChange:e=>p(e.target.checked),label:"Mirror tracks vertically in vertically stacked view"})]}),n.jsxs(j,{children:[n.jsx(w,{onClick:()=>{const{view:e}=t,k=y.getSession(t);try{const r=R({view:e,f1:a,f2:o}),[f,l]=r.views,d=C(e.tracks);k.addView("BreakpointSplitView",{...r,views:[{...f,tracks:g(d),offsetPx:f.offsetPx-e.width/2+100},{...l,tracks:g(c?[...d].reverse():d),offsetPx:l.offsetPx-e.width/2+100}]})}catch(r){console.error(r),k.notify(`${r}`)}s()},variant:"contained",color:"primary",autoFocus:!0,children:"OK"}),n.jsx(w,{onClick:()=>s(),color:"secondary",variant:"contained",children:"Cancel"})]})]})});export{V as default};
//# sourceMappingURL=BreakendOptionDialog-DB88AyLn.js.map
