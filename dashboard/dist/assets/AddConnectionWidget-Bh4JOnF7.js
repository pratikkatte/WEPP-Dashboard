import{o as g,ba as v,R as t,a as r,c as b,e as k,j as h,J as x,ak as N,Q as I,m as y,u as p,bp as M,bq as W,br as B,bs as L,b as C}from"./rpcWorker-BQYX6MpU.js";function R(e){return"id"in e&&"name"in e&&"root"in e}function V(e){return R(e)&&"connectionInstances"in e}const j=g(function({connectionType:e,model:a,session:o}){const s=e.configEditorComponent||v;return t.createElement(r.Suspense,{fallback:t.createElement(b.LoadingEllipses,null)},t.createElement(s,{model:{target:a},session:o}))});var w=k(h.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew");const z=g(function({connectionTypeChoices:a,connectionType:o,setConnectionType:s}){const m=a[0];return r.useEffect(()=>{o||s(m)},[o,m,s]),t.createElement("form",{autoComplete:"off"},o?t.createElement(x,{value:o.name,label:"connectionType",helperText:o.description?t.createElement(t.Fragment,null,o.description,o.url?t.createElement(N,{href:o.url,rel:"noopener noreferrer",target:"_blank"},t.createElement(w,null)):null):null,select:!0,fullWidth:!0,onChange:n=>{s(a.find(d=>d.name===n.target.value))},variant:"outlined"},a.map(n=>t.createElement(I,{key:n.name,value:n.name},n.displayName||n.name))):null)}),T=y()(e=>({root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)}})),f=["Select a Connection Type","Configure Connection"],F=g(function({model:e}){const[a,o]=r.useState(),[s,m]=r.useState(),[n,d]=r.useState(0),{classes:c}=T(),i=p.getSession(e),{pluginManager:S}=p.getEnv(i),l=r.useMemo(()=>a==null?void 0:a.configSchema.create({connectionId:s},p.getEnv(e)),[s,a,e]);return t.createElement("div",{className:c.root},t.createElement(M,{className:c.stepper,activeStep:n,orientation:"vertical"},f.map(E=>t.createElement(W,{key:E},t.createElement(B,null,E),t.createElement(L,null,n===0?t.createElement(z,{connectionTypeChoices:S.getConnectionElements(),connectionType:a,setConnectionType:u=>{o(u),u&&m(`${u.name}-${Date.now()}`)}}):a&&l?t.createElement(j,{connectionType:a,model:l,session:i}):null,t.createElement("div",{className:c.actionsContainer},t.createElement(C,{disabled:n===0,onClick:()=>{d(n-1)},className:c.button},"Back"),t.createElement(C,{disabled:!(n===0&&a||n===1&&l),variant:"contained",color:"primary",onClick:()=>{if(n===f.length-1){if(l&&V(i)){const u=i.addConnectionConf(l);i.makeConnection(u)}else i.notify("No config model to add");p.isSessionModelWithWidgets(i)&&i.hideWidget(e)}else d(n+1)},className:c.button,"data-testid":"addConnectionNext"},n===f.length-1?"Connect":"Next")))))))});export{F as default};
//# sourceMappingURL=AddConnectionWidget-Bh4JOnF7.js.map
