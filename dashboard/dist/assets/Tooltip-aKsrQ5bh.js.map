{"version":3,"file":"Tooltip-aKsrQ5bh.js","sources":["../node_modules/@jbrowse/plugin-alignments/esm/LinearSNPCoverageDisplay/components/Tooltip.js"],"sourcesContent":["import React from 'react';\nimport { toLocale } from '@jbrowse/core/util';\nimport { Tooltip } from '@jbrowse/plugin-wiggle';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(() => ({\n    td: {\n        whiteSpace: 'nowrap',\n    },\n}));\nconst toP = (s = 0) => +(+s).toFixed(1);\nconst pct = (n, total = 1) => `${toP((n / (total || 1)) * 100)}%`;\nconst TooltipContents = React.forwardRef(function TooltipContents2(props, reactRef) {\n    const { feature, model } = props;\n    const { classes } = useStyles();\n    const start = feature.get('start') + 1;\n    const end = feature.get('end');\n    const name = feature.get('refName');\n    const { refbase, readsCounted, depth, ref, ...info } = feature.get('snpinfo');\n    const loc = [\n        name,\n        start === end ? toLocale(start) : `${toLocale(start)}..${toLocale(end)}`,\n    ]\n        .filter(f => !!f)\n        .join(':');\n    return (React.createElement(\"div\", { ref: reactRef },\n        React.createElement(\"table\", null,\n            React.createElement(\"caption\", null, loc),\n            React.createElement(\"thead\", null,\n                React.createElement(\"tr\", null,\n                    React.createElement(\"th\", null),\n                    React.createElement(\"th\", null, \"Base\"),\n                    React.createElement(\"th\", null, \"Count\"),\n                    React.createElement(\"th\", null, \"% of Total\"),\n                    React.createElement(\"th\", null, \"Strands\"))),\n            React.createElement(\"tbody\", null,\n                React.createElement(\"tr\", null,\n                    React.createElement(\"td\", null),\n                    React.createElement(\"td\", null, \"Total\"),\n                    React.createElement(\"td\", null, readsCounted),\n                    React.createElement(\"td\", null, \" \"),\n                    React.createElement(\"td\", null, \" \")),\n                React.createElement(\"tr\", null,\n                    React.createElement(\"td\", null),\n                    React.createElement(\"td\", null,\n                        \"REF \",\n                        refbase ? `(${refbase.toUpperCase()})` : ''),\n                    React.createElement(\"td\", null, ref.entryDepth),\n                    React.createElement(\"td\", null, pct(ref.entryDepth, readsCounted)),\n                    React.createElement(\"td\", null,\n                        ref['-1'] ? `${ref['-1']}(-)` : '',\n                        ref['1'] ? `${ref['1']}(+)` : '')),\n                Object.entries(info).map(([key, entry]) => Object.entries(entry).map(([base, score]) => (React.createElement(\"tr\", { key: `${key}_${base}` },\n                    React.createElement(\"td\", null,\n                        React.createElement(ColorSquare, { model: model, base: base })),\n                    React.createElement(\"td\", null,\n                        base.toUpperCase(),\n                        \" \"),\n                    React.createElement(\"td\", { className: classes.td }, [\n                        score.entryDepth,\n                        score.avgProbability !== undefined\n                            ? `(avg. ${pct(score.avgProbability)} prob.)`\n                            : '',\n                    ]\n                        .filter(f => !!f)\n                        .join(' ')),\n                    React.createElement(\"td\", null, base === 'depth' || base === 'skip'\n                        ? '---'\n                        : pct(score.entryDepth, readsCounted)),\n                    React.createElement(\"td\", null,\n                        score['-1'] ? `${score['-1']}(-)` : '',\n                        score['1'] ? `${score['1']}(+)` : '')))))))));\n});\nfunction ColorSquare({ base, model, }) {\n    var _a;\n    const { visibleModifications } = model;\n    return base.startsWith('mod_') ? (React.createElement(\"div\", { style: {\n            width: 10,\n            height: 10,\n            background: (_a = visibleModifications.get(base.replace('mod_', ''))) === null || _a === void 0 ? void 0 : _a.color,\n        } })) : null;\n}\nconst SNPCoverageTooltip = observer(function (props) {\n    const { model } = props;\n    const { featureUnderMouse: feat } = model;\n    return feat && feat.get('type') === 'skip' ? null : (React.createElement(Tooltip, { TooltipContents: TooltipContents, ...props }));\n});\nexport default SNPCoverageTooltip;\n"],"names":["useStyles","makeStyles","toP","s","pct","n","total","TooltipContents","React","props","reactRef","feature","model","classes","start","end","name","refbase","readsCounted","depth","ref","info","loc","toLocale","f","key","entry","base","score","ColorSquare","_a","visibleModifications","SNPCoverageTooltip","observer","feat","Tooltip"],"mappings":"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","x_google_ignoreList":[0]}