{"version":3,"file":"renderSvg-DA-7lbhP.js","sources":["../../node_modules/@jbrowse/plugin-linear-genome-view/esm/BaseLinearDisplay/models/renderSvg.js"],"sourcesContent":["import React from 'react';\nimport { ReactRendering, getContainingView, getViewParams, } from '@jbrowse/core/util';\nimport BlockState, { renderBlockData } from './serverSideRenderedBlock';\nimport { getId } from './util';\nexport async function renderBaseLinearDisplaySvg(self, opts) {\n    const { height, id } = self;\n    const { overrideHeight } = opts;\n    const view = getContainingView(self);\n    const { offsetPx: viewOffsetPx, roundedDynamicBlocks, width } = view;\n    const renderings = await Promise.all(roundedDynamicBlocks.map(async (block) => {\n        const blockState = BlockState.create({\n            key: block.key,\n            region: block,\n        });\n        const cannotBeRenderedReason = self.regionCannotBeRenderedText(block) ||\n            self.regionCannotBeRendered(block);\n        if (cannotBeRenderedReason) {\n            return [\n                block,\n                {\n                    reactElement: (React.createElement(React.Fragment, null,\n                        React.createElement(\"rect\", { x: 0, y: 0, width: width, height: 20, fill: \"#aaa\" }),\n                        React.createElement(\"text\", { x: 0, y: 15 }, cannotBeRenderedReason))),\n                },\n            ];\n        }\n        const { rpcManager, renderArgs, renderProps, rendererType } = renderBlockData(blockState, self);\n        return [\n            block,\n            await rendererType.renderInClient(rpcManager, {\n                ...renderArgs,\n                ...renderProps,\n                viewParams: getViewParams(self, true),\n                exportSVG: opts,\n                theme: opts.theme || renderProps.theme,\n            }),\n        ];\n    }));\n    return (React.createElement(React.Fragment, null, renderings.map(([block, rendering], index) => {\n        const { offsetPx, widthPx } = block;\n        const offset = offsetPx - viewOffsetPx;\n        const clipid = getId(id, index);\n        return (React.createElement(React.Fragment, { key: `frag-${index}` },\n            React.createElement(\"defs\", null,\n                React.createElement(\"clipPath\", { id: clipid },\n                    React.createElement(\"rect\", { x: 0, y: 0, width: widthPx, height: overrideHeight || height }))),\n            React.createElement(\"g\", { transform: `translate(${offset} 0)` },\n                React.createElement(\"g\", { clipPath: `url(#${clipid})` },\n                    React.createElement(ReactRendering, { rendering: rendering })))));\n    })));\n}\n"],"names":["renderBaseLinearDisplaySvg","self","opts","height","id","overrideHeight","view","getContainingView","viewOffsetPx","roundedDynamicBlocks","width","renderings","block","blockState","BlockState","cannotBeRenderedReason","React","rpcManager","renderArgs","renderProps","rendererType","renderBlockData","getViewParams","rendering","index","offsetPx","widthPx","offset","clipid","getId","ReactRendering"],"mappings":"oEAIO,eAAeA,EAA2BC,EAAMC,EAAM,CACzD,KAAM,CAAE,OAAAC,EAAQ,GAAAC,CAAE,EAAKH,EACjB,CAAE,eAAAI,CAAc,EAAKH,EACrBI,EAAOC,EAAiB,kBAACN,CAAI,EAC7B,CAAE,SAAUO,EAAc,qBAAAC,EAAsB,MAAAC,CAAO,EAAGJ,EAC1DK,EAAa,MAAM,QAAQ,IAAIF,EAAqB,IAAI,MAAOG,GAAU,CAC3E,MAAMC,EAAaC,EAAW,OAAO,CACjC,IAAKF,EAAM,IACX,OAAQA,CACpB,CAAS,EACKG,EAAyBd,EAAK,2BAA2BW,CAAK,GAChEX,EAAK,uBAAuBW,CAAK,EACrC,GAAIG,EACA,MAAO,CACHH,EACA,CACI,aAAeI,EAAM,cAAcA,EAAM,SAAU,KAC/CA,EAAM,cAAc,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAG,MAAON,EAAO,OAAQ,GAAI,KAAM,MAAM,CAAE,EAClFM,EAAM,cAAc,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAE,EAAID,CAAsB,CAAC,CAC3E,CACJ,EAEL,KAAM,CAAE,WAAAE,EAAY,WAAAC,EAAY,YAAAC,EAAa,aAAAC,CAAY,EAAKC,EAAgBR,EAAYZ,CAAI,EAC9F,MAAO,CACHW,EACA,MAAMQ,EAAa,eAAeH,EAAY,CAC1C,GAAGC,EACH,GAAGC,EACH,WAAYG,EAAAA,cAAcrB,EAAM,EAAI,EACpC,UAAWC,EACX,MAAOA,EAAK,OAASiB,EAAY,KACjD,CAAa,CACJ,CACT,CAAK,CAAC,EACF,OAAQH,EAAM,cAAcA,EAAM,SAAU,KAAML,EAAW,IAAI,CAAC,CAACC,EAAOW,CAAS,EAAGC,IAAU,CAC5F,KAAM,CAAE,SAAAC,EAAU,QAAAC,CAAO,EAAKd,EACxBe,EAASF,EAAWjB,EACpBoB,EAASC,EAAMzB,EAAIoB,CAAK,EAC9B,OAAQR,EAAM,cAAcA,EAAM,SAAU,CAAE,IAAK,QAAQQ,CAAK,EAAI,EAChER,EAAM,cAAc,OAAQ,KACxBA,EAAM,cAAc,WAAY,CAAE,GAAIY,CAAQ,EAC1CZ,EAAM,cAAc,OAAQ,CAAE,EAAG,EAAG,EAAG,EAAG,MAAOU,EAAS,OAAQrB,GAAkBF,CAAM,CAAE,CAAC,CAAC,EACtGa,EAAM,cAAc,IAAK,CAAE,UAAW,aAAaW,CAAM,KAAO,EAC5DX,EAAM,cAAc,IAAK,CAAE,SAAU,QAAQY,CAAM,GAAK,EACpDZ,EAAM,cAAcc,iBAAgB,CAAE,UAAWP,CAAS,CAAE,CAAC,CAAC,CAAC,CACnF,CAAK,CAAC,CACN","x_google_ignoreList":[0]}