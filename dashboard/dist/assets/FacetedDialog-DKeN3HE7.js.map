{"version":3,"file":"FacetedDialog-DKeN3HE7.js","sources":["../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilter.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetFilters.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedHeader.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedSelector.js","../../node_modules/@jbrowse/plugin-data-management/esm/HierarchicalTrackSelectorWidget/components/faceted/FacetedDialog.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { coarseStripHTML } from '@jbrowse/core/util';\nimport AddIcon from '@mui/icons-material/Add';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MinimizeIcon from '@mui/icons-material/Minimize';\nimport { FormControl, IconButton, Select, Tooltip, Typography, } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()(theme => ({\n    facet: {\n        margin: 0,\n        marginLeft: theme.spacing(2),\n    },\n    select: {\n        marginBottom: theme.spacing(2),\n    },\n}));\nfunction ClearButton({ onClick }) {\n    return (React.createElement(Tooltip, { title: \"Clear selection on this facet filter\" },\n        React.createElement(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\" },\n            React.createElement(ClearIcon, null))));\n}\nfunction ExpandButton({ visible, onClick, }) {\n    return (React.createElement(Tooltip, { title: \"Minimize/expand this facet filter\" },\n        React.createElement(IconButton, { onClick: () => {\n                onClick();\n            }, size: \"small\" }, visible ? React.createElement(MinimizeIcon, null) : React.createElement(AddIcon, null))));\n}\nconst FacetFilter = observer(function ({ column, vals, model, }) {\n    const { classes } = useStyles();\n    const [visible, setVisible] = useState(true);\n    const { faceted } = model;\n    const { filters } = faceted;\n    const { field } = column;\n    return (React.createElement(FormControl, { className: classes.facet, fullWidth: true },\n        React.createElement(\"div\", null,\n            React.createElement(Typography, { component: \"span\" }, field),\n            React.createElement(ClearButton, { onClick: () => {\n                    faceted.setFilter(field, []);\n                } }),\n            React.createElement(ExpandButton, { visible: visible, onClick: () => {\n                    setVisible(!visible);\n                } })),\n        visible ? (React.createElement(Select, { multiple: true, native: true, className: classes.select, value: filters.get(column.field) || [], onChange: event => {\n                faceted.setFilter(column.field, [...event.target.options]\n                    .filter(opt => opt.selected)\n                    .map(opt => opt.value));\n            } }, vals\n            .sort((a, b) => a[0].localeCompare(b[0]))\n            .map(([name, count]) => (React.createElement(\"option\", { key: name, value: name },\n            coarseStripHTML(name),\n            \" (\",\n            count,\n            \")\"))))) : null));\n});\nexport default FacetFilter;\n","import React from 'react';\nimport { observer } from 'mobx-react';\nimport FacetFilter from './FacetFilter';\nimport { getRowStr } from './util';\nconst FacetFilters = observer(function ({ rows, columns, model, }) {\n    var _a, _b;\n    const { faceted } = model;\n    const { filters } = faceted;\n    const facets = columns.slice(1);\n    const uniqs = new Map(facets.map(f => [f.field, new Map()]));\n    const filterKeys = faceted.filters.keys();\n    const facetKeys = facets.map(f => f.field);\n    const ret = new Set();\n    for (const entry of filterKeys) {\n        if ((_a = filters.get(entry)) === null || _a === void 0 ? void 0 : _a.length) {\n            ret.add(entry);\n        }\n    }\n    for (const entry of facetKeys) {\n        ret.add(entry);\n    }\n    let currentRows = rows;\n    for (const facet of ret) {\n        const elt = uniqs.get(facet);\n        for (const row of currentRows) {\n            const key = getRowStr(facet, row);\n            const val = elt.get(key);\n            if (key) {\n                if (val === undefined) {\n                    elt.set(key, 1);\n                }\n                else {\n                    elt.set(key, val + 1);\n                }\n            }\n        }\n        const filter = ((_b = filters.get(facet)) === null || _b === void 0 ? void 0 : _b.length)\n            ? new Set(filters.get(facet))\n            : undefined;\n        currentRows = currentRows.filter(row => filter !== undefined ? filter.has(getRowStr(facet, row)) : true);\n    }\n    return (React.createElement(\"div\", null, facets.map(c => (React.createElement(FacetFilter, { key: c.field, vals: [...uniqs.get(c.field)], column: c, model: model })))));\n});\nexport default FacetFilters;\n","import React, { useState } from 'react';\nimport { Menu } from '@jbrowse/core/ui';\nimport ClearIcon from '@mui/icons-material/Clear';\nimport MoreVert from '@mui/icons-material/MoreVert';\nimport { Grid, IconButton, InputAdornment, TextField } from '@mui/material';\nimport ShoppingCart from '../ShoppingCart';\nexport default function FacetedHeader({ model, }) {\n    const { faceted } = model;\n    const [anchorEl, setAnchorEl] = useState(null);\n    const { showOptions, showFilters, showSparse, useShoppingCart } = faceted;\n    return (React.createElement(React.Fragment, null,\n        React.createElement(Grid, { container: true, spacing: 4, alignItems: \"center\" },\n            React.createElement(Grid, { item: true },\n                React.createElement(TextField, { label: \"Search...\", value: faceted.filterText, onChange: event => {\n                        faceted.setFilterText(event.target.value);\n                    }, slotProps: {\n                        input: {\n                            endAdornment: (React.createElement(InputAdornment, { position: \"end\" },\n                                React.createElement(IconButton, { onClick: () => {\n                                        faceted.setFilterText('');\n                                    } },\n                                    React.createElement(ClearIcon, null)))),\n                        },\n                    } })),\n            React.createElement(Grid, { item: true },\n                React.createElement(IconButton, { onClick: event => {\n                        setAnchorEl(event.currentTarget);\n                    } },\n                    React.createElement(MoreVert, null))),\n            React.createElement(Grid, { item: true },\n                React.createElement(ShoppingCart, { model: model }))),\n        React.createElement(Menu, { anchorEl: anchorEl, open: !!anchorEl, onClose: () => {\n                setAnchorEl(null);\n            }, onMenuItemClick: (_event, callback) => {\n                callback();\n                setAnchorEl(null);\n            }, menuItems: [\n                {\n                    label: 'Add tracks to selection instead of turning them on/off',\n                    onClick: () => {\n                        faceted.setUseShoppingCart(!useShoppingCart);\n                    },\n                    type: 'checkbox',\n                    checked: useShoppingCart,\n                },\n                {\n                    label: 'Show sparse metadata columns',\n                    onClick: () => {\n                        faceted.setShowSparse(!showSparse);\n                    },\n                    checked: showSparse,\n                    type: 'checkbox',\n                },\n                {\n                    label: 'Show facet filters',\n                    onClick: () => {\n                        faceted.setShowFilters(!showFilters);\n                    },\n                    checked: showFilters,\n                    type: 'checkbox',\n                },\n                {\n                    label: 'Show extra table options',\n                    onClick: () => {\n                        faceted.setShowOptions(!showOptions);\n                    },\n                    checked: showOptions,\n                    type: 'checkbox',\n                },\n            ] })));\n}\n","import React, { useState } from 'react';\nimport { ResizeHandle } from '@jbrowse/core/ui';\nimport SanitizedHTML from '@jbrowse/core/ui/SanitizedHTML';\nimport { getEnv, measureGridWidth } from '@jbrowse/core/util';\nimport { DataGrid, GridToolbar } from '@mui/x-data-grid';\nimport { transaction } from 'mobx';\nimport { observer } from 'mobx-react';\nimport { getRoot, resolveIdentifier } from 'mobx-state-tree';\nimport { makeStyles } from 'tss-react/mui';\nimport FacetFilters from './FacetFilters';\nimport FacetedHeader from './FacetedHeader';\nimport TrackLabelMenu from '../tree/TrackLabelMenu';\nconst useStyles = makeStyles()({\n    cell: {\n        whiteSpace: 'nowrap',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n    },\n    resizeHandle: {\n        marginLeft: 5,\n        background: 'grey',\n        width: 5,\n    },\n});\nconst frac = 0.75;\nconst FacetedSelector = observer(function FacetedSelector({ model, }) {\n    var _a;\n    const { classes } = useStyles();\n    const { view, selection, shownTrackIds, faceted } = model;\n    const { rows, panelWidth, showFilters, useShoppingCart, showOptions, filteredRows, filteredNonMetadataKeys, filteredMetadataKeys, visible, } = faceted;\n    const { pluginManager } = getEnv(model);\n    const [widths, setWidths] = useState({\n        name: measureGridWidth(rows.map(r => r.name), { maxWidth: 500, stripHTML: true }) + 15,\n        ...Object.fromEntries(filteredNonMetadataKeys\n            .filter(f => visible[f])\n            .map(e => [\n            e,\n            measureGridWidth(rows.map(r => r[e]), { maxWidth: 400, stripHTML: true }),\n        ])),\n        ...Object.fromEntries(filteredMetadataKeys\n            .filter(f => visible[`metadata.${f}`])\n            .map(e => {\n            return [\n                `metadata.${e}`,\n                measureGridWidth(rows.map(r => r.metadata[e]), { maxWidth: 400, stripHTML: true }),\n            ];\n        })),\n    });\n    const columns = [\n        {\n            field: 'name',\n            hideable: false,\n            renderCell: params => {\n                const { value, row } = params;\n                const { id, conf } = row;\n                return (React.createElement(\"div\", { className: classes.cell },\n                    React.createElement(SanitizedHTML, { html: value }),\n                    React.createElement(TrackLabelMenu, { id: id, conf: conf, trackId: id, model: model })));\n            },\n            width: (_a = widths.name) !== null && _a !== void 0 ? _a : 100,\n        },\n        ...filteredNonMetadataKeys.map(e => {\n            var _a;\n            return {\n                field: e,\n                width: (_a = widths[e]) !== null && _a !== void 0 ? _a : 100,\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (React.createElement(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n        ...filteredMetadataKeys.map(e => {\n            var _a;\n            return {\n                field: `metadata.${e}`,\n                headerName: ['name', ...filteredNonMetadataKeys].includes(e)\n                    ? `${e} (from metadata)`\n                    : e,\n                width: (_a = widths[`metadata.${e}`]) !== null && _a !== void 0 ? _a : 100,\n                valueGetter: (_, row) => { var _a; return `${(_a = row.metadata[e]) !== null && _a !== void 0 ? _a : ''}`; },\n                renderCell: params => {\n                    const val = params.value;\n                    return val ? (React.createElement(SanitizedHTML, { className: classes.cell, html: val })) : ('');\n                },\n            };\n        }),\n    ];\n    return (React.createElement(React.Fragment, null,\n        React.createElement(FacetedHeader, { model: model }),\n        React.createElement(\"div\", { style: {\n                display: 'flex',\n                overflow: 'hidden',\n                height: window.innerHeight * frac,\n                width: window.innerWidth * frac,\n            } },\n            React.createElement(\"div\", { style: {\n                    height: window.innerHeight * frac,\n                    width: window.innerWidth * frac - (showFilters ? panelWidth : 0),\n                } },\n                React.createElement(DataGrid, { rows: filteredRows, onColumnWidthChange: arg => {\n                        setWidths({ ...widths, [arg.colDef.field]: arg.width });\n                    }, columnVisibilityModel: visible, onColumnVisibilityModelChange: n => {\n                        faceted.setVisible(n);\n                    }, columnHeaderHeight: 35, checkboxSelection: true, disableRowSelectionOnClick: true, keepNonExistentRowsSelected: true, onRowSelectionModelChange: userSelectedIds => {\n                        if (!useShoppingCart) {\n                            const a1 = shownTrackIds;\n                            const a2 = new Set(userSelectedIds);\n                            transaction(() => {\n                                ;\n                                [...a1].filter(x => !a2.has(x)).map(t => view.hideTrack(t));\n                                [...a2]\n                                    .filter(x => !a1.has(x))\n                                    .map(t => {\n                                    view.showTrack(t);\n                                    model.addToRecentlyUsed(t);\n                                });\n                            });\n                        }\n                        else {\n                            const root = getRoot(model);\n                            const schema = pluginManager.pluggableConfigSchemaType('track');\n                            model.setSelection(userSelectedIds.map(id => resolveIdentifier(schema, root, id)));\n                        }\n                    }, rowSelectionModel: useShoppingCart\n                        ? selection.map(s => s.trackId)\n                        : [...shownTrackIds], slots: { toolbar: showOptions ? GridToolbar : null }, slotProps: {\n                        toolbar: {\n                            printOptions: {\n                                disableToolbarButton: true,\n                            },\n                        },\n                    }, columns: columns, rowHeight: 25 })),\n            showFilters ? (React.createElement(React.Fragment, null,\n                React.createElement(ResizeHandle, { vertical: true, onDrag: dist => faceted.setPanelWidth(panelWidth - dist), className: classes.resizeHandle }),\n                React.createElement(\"div\", { style: { width: panelWidth, overflow: 'auto' } },\n                    React.createElement(FacetFilters, { model: model, rows: rows, columns: columns })))) : null)));\n});\nexport default FacetedSelector;\n","import React from 'react';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { DialogContent } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport FacetedSelector from './FacetedSelector';\nconst FacetedTrackSelectorDialog = observer(function (props) {\n    const { handleClose } = props;\n    return (React.createElement(Dialog, { open: true, onClose: handleClose, maxWidth: \"xl\", title: \"Faceted track selector\" },\n        React.createElement(DialogContent, null,\n            React.createElement(FacetedSelector, { ...props }))));\n});\nexport default FacetedTrackSelectorDialog;\n"],"names":["useStyles","makeStyles","theme","ClearButton","onClick","React","Tooltip","IconButton","ClearIcon","ExpandButton","visible","MinimizeIcon","AddIcon","FacetFilter","observer","column","vals","model","classes","setVisible","useState","faceted","filters","field","FormControl","Typography","Select","event","opt","a","b","name","count","coarseStripHTML","FacetFilters","rows","columns","_a","_b","facets","uniqs","f","filterKeys","facetKeys","ret","entry","currentRows","facet","elt","row","key","getRowStr","val","filter","c","FacetedHeader","anchorEl","setAnchorEl","showOptions","showFilters","showSparse","useShoppingCart","Grid","TextField","InputAdornment","MoreVert","ShoppingCart","Menu","_event","callback","frac","FacetedSelector","view","selection","shownTrackIds","panelWidth","filteredRows","filteredNonMetadataKeys","filteredMetadataKeys","pluginManager","getEnv","widths","setWidths","measureGridWidth","r","e","params","value","id","conf","SanitizedHTML","TrackLabelMenu","_","DataGrid","arg","n","userSelectedIds","root","getRoot","schema","resolveIdentifier","a1","a2","transaction","x","t","s","GridToolbar","ResizeHandle","dist","FacetedTrackSelectorDialog","props","handleClose","Dialog","DialogContent"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}