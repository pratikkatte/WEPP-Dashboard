import{o as f,ba as v,R as e,a as l,c as b,V as h,X as k,d as x,af as N,M as I,m as M,u as p,bb as y,bc as W,bd as B,be as V,B as C,bf as L}from"./index-CTn4VqQ6.js";const R=f(function({connectionType:a,model:n,session:o}){const s=a.configEditorComponent||v;return e.createElement(l.Suspense,{fallback:e.createElement(b.LoadingEllipses,null)},e.createElement(s,{model:{target:n},session:o}))}),w=h(k.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),z=f(function({connectionTypeChoices:n,connectionType:o,setConnectionType:s}){const m=n[0];return l.useEffect(()=>{o||s(m)},[o,m,s]),e.createElement("form",{autoComplete:"off"},o?e.createElement(x,{value:o.name,label:"connectionType",helperText:o.description?e.createElement(e.Fragment,null,o.description,o.url?e.createElement(N,{href:o.url,rel:"noopener noreferrer",target:"_blank"},e.createElement(w,null)):null):null,select:!0,fullWidth:!0,onChange:t=>{s(n.find(d=>d.name===t.target.value))},variant:"outlined"},n.map(t=>e.createElement(I,{key:t.name,value:t.name},t.displayName||t.name))):null)}),T=M()(a=>({root:{marginTop:a.spacing(1)},stepper:{backgroundColor:a.palette.background.default},button:{marginTop:a.spacing(1),marginRight:a.spacing(1)},actionsContainer:{marginBottom:a.spacing(2)}})),g=["Select a Connection Type","Configure Connection"],A=f(function({model:a}){const[n,o]=l.useState(),[s,m]=l.useState(),[t,d]=l.useState(0),{classes:c}=T(),i=p.getSession(a),{pluginManager:S}=p.getEnv(i),r=l.useMemo(()=>n==null?void 0:n.configSchema.create({connectionId:s},p.getEnv(a)),[s,n,a]);return e.createElement("div",{className:c.root},e.createElement(y,{className:c.stepper,activeStep:t,orientation:"vertical"},g.map(E=>e.createElement(W,{key:E},e.createElement(B,null,E),e.createElement(V,null,t===0?e.createElement(z,{connectionTypeChoices:S.getConnectionElements(),connectionType:n,setConnectionType:u=>{o(u),u&&m(`${u.name}-${Date.now()}`)}}):n&&r?e.createElement(R,{connectionType:n,model:r,session:i}):null,e.createElement("div",{className:c.actionsContainer},e.createElement(C,{disabled:t===0,onClick:()=>{d(t-1)},className:c.button},"Back"),e.createElement(C,{disabled:!(t===0&&n||t===1&&r),variant:"contained",color:"primary",onClick:()=>{if(t===g.length-1){if(r&&L(i)){const u=i.addConnectionConf(r);i.makeConnection(u)}else i.notify("No config model to add");p.isSessionModelWithWidgets(i)&&i.hideWidget(a)}else d(t+1)},className:c.button,"data-testid":"addConnectionNext"},t===g.length-1?"Connect":"Next")))))))});export{A as default};
//# sourceMappingURL=AddConnectionWidget-C2DetwOd.js.map
