{"version":3,"mappings":"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","names":["useStyles","makeStyles","flagNames","AlignmentFlags","props","classes","feature","flags","React","BaseCard","SimpleField","FormGroup","name","idx","val","key","FormControlLabel","Checkbox","Formatter","value","show","setShow","useState","copied","setCopied","display","copy","getTag","tag","feat","_a","navToLoc","locString","model","session","getSession","view","e","PairLink","Link","event","tags","SupplementaryAlignments","lazy","__vitePreload","LinkedPairedAlignments","AlignmentsFeatureDetails","observer","featureData","SA","Paper","FeatureDetails","Flags"],"ignoreList":[0,1,2,3,4,5],"sources":["../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/Flags.js","../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/Formatter.js","../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/util.js","../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/PairLink.js","../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/tagInfo.js","../../node_modules/@jbrowse/plugin-alignments/esm/AlignmentsFeatureDetail/AlignmentsFeatureDetail.js"],"sourcesContent":["import React from 'react';\nimport BaseCard from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/BaseCard';\nimport SimpleField from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/SimpleField';\nimport { Checkbox, FormControlLabel, FormGroup } from '@mui/material';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()({\n    compact: {\n        paddingRight: 0,\n        paddingTop: 0,\n        paddingBottom: 0,\n    },\n});\nconst flagNames = [\n    'read paired',\n    'read mapped in proper pair',\n    'read unmapped',\n    'mate unmapped',\n    'read reverse strand',\n    'mate reverse strand',\n    'first in pair',\n    'second in pair',\n    'not primary alignment',\n    'read fails platform/vendor quality checks',\n    'read is PCR or optical duplicate',\n    'supplementary alignment',\n];\nexport default function AlignmentFlags(props) {\n    const { classes } = useStyles();\n    const { feature } = props;\n    const { flags } = feature;\n    return (React.createElement(BaseCard, { ...props, title: \"Flags\" },\n        React.createElement(SimpleField, { name: \"Flag\", value: flags }),\n        React.createElement(FormGroup, null, flagNames.map((name, idx) => {\n            const val = flags & (1 << idx);\n            const key = `${name}_${val}`;\n            return (React.createElement(FormControlLabel, { key: key, control: React.createElement(Checkbox, { className: classes.compact, checked: Boolean(val), name: name, readOnly: true }), label: name }));\n        }))));\n}\n","import React, { useState } from 'react';\nimport copy from 'copy-to-clipboard';\nexport default function Formatter({ value }) {\n    const [show, setShow] = useState(false);\n    const [copied, setCopied] = useState(false);\n    const display = String(value);\n    return display.length > 100 ? (React.createElement(React.Fragment, null,\n        React.createElement(\"button\", { type: \"button\", onClick: () => {\n                copy(display);\n                setCopied(true);\n                setTimeout(() => {\n                    setCopied(false);\n                }, 700);\n            } }, copied ? 'Copied to clipboard' : 'Copy'),\n        React.createElement(\"button\", { type: \"button\", onClick: () => {\n                setShow(val => !val);\n            } }, show ? 'Show less' : 'Show more'),\n        React.createElement(\"div\", null, show ? display : `${display.slice(0, 100)}...`))) : (React.createElement(\"div\", null, display));\n}\n","import { getSession } from '@jbrowse/core/util';\nexport function getTag(tag, feat) {\n    var _a;\n    return ((_a = feat.tags) === null || _a === void 0 ? void 0 : _a[tag]) || feat[tag];\n}\nexport async function navToLoc(locString, model) {\n    const session = getSession(model);\n    const { view } = model;\n    try {\n        if (view) {\n            await view.navToLocString(locString);\n        }\n        else {\n            throw new Error('No view associated with this view anymore');\n        }\n    }\n    catch (e) {\n        console.error(e);\n        session.notify(`${e}`);\n    }\n}\n","import React from 'react';\nimport { Link } from '@mui/material';\nimport { navToLoc } from './util';\nexport default function PairLink({ locString, model, }) {\n    return (React.createElement(Link, { onClick: event => {\n            event.preventDefault();\n            navToLoc(locString, model);\n        }, href: \"#\" }, locString));\n}\n","export const tags = {\n    AM: 'The smallest template-independent mapping quality in the template',\n    AS: 'Alignment score generated by aligner',\n    BC: 'Barcode sequence identifying the sample',\n    BQ: 'Offset to base alignment quality (BAQ)',\n    BZ: 'Phred quality of the unique molecular barcode bases in the {OX} tag',\n    CB: 'Cell identifier',\n    CC: 'Reference name of the next hit',\n    CM: 'Edit distance between the color sequence and the color reference (see also {NM})',\n    CO: 'Free-text comments',\n    CP: 'Leftmost coordinate of the next hit',\n    CQ: 'Color read base qualities',\n    CR: 'Cellular barcode sequence bases (uncorrected)',\n    CS: 'Color read sequence',\n    CT: 'Complete read annotation tag, used for consensus annotation dummy features',\n    CY: 'Phred quality of the cellular barcode sequence in the {CR} tag',\n    E2: 'The 2nd most likely base calls',\n    FI: 'The index of segment in the template',\n    FS: 'Segment suffix',\n    FZ: 'Flow stopToken intensities',\n    GC: 'Reserved for backwards compatibility reasons',\n    GQ: 'Reserved for backwards compatibility reasons',\n    GS: 'Reserved for backwards compatibility reasons',\n    H0: 'Number of perfect hits',\n    H1: 'Number of 1-difference hits (see also {NM})',\n    H2: 'Number of 2-difference hits',\n    HI: 'Query hit index',\n    IH: 'Query hit total count',\n    LB: 'Library',\n    MC: 'CIGAR string for mate/next segment',\n    MD: 'String encoding mismatched and deleted reference bases',\n    MF: 'Reserved for backwards compatibility reasons',\n    MI: 'Molecular identifier; a string that uniquely identifies the molecule from which the record was derived',\n    ML: 'Base modification probabilities',\n    MM: 'Base modifications / methylation ',\n    MQ: 'Mapping quality of the mate/next segment',\n    NH: 'Number of reported alignments that contain the query in the current record',\n    NM: 'Edit distance to the reference',\n    OA: 'Original alignment',\n    OC: 'Original CIGAR (deprecated; use {OA} instead)',\n    OP: 'Original mapping position (deprecated; use {OA} instead)',\n    OQ: 'Original base quality',\n    OX: 'Original unique molecular barcode bases',\n    PG: 'Program',\n    PQ: 'Phred likelihood of the template',\n    PT: 'Read annotations for parts of the padded read sequence',\n    PU: 'Platform unit',\n    Q2: 'Phred quality of the mate/next segment sequence in the {R2} tag',\n    QT: 'Phred quality of the sample barcode sequence in the {BC} tag',\n    QX: 'Quality score of the unique molecular identifier in the {RX} tag',\n    R2: 'Sequence of the mate/next segment in the template',\n    RG: 'Read group',\n    RT: 'Reserved for backwards compatibility reasons',\n    RX: 'Sequence bases of the (possibly corrected) unique molecular identifier',\n    S2: 'Reserved for backwards compatibility reasons',\n    SA: 'Other canonical alignments in a chimeric alignment',\n    SM: 'Template-independent mapping quality',\n    SQ: 'Reserved for backwards compatibility reasons',\n    TC: 'The number of segments in the template',\n    TS: 'Transcript strand',\n    U2: 'Phred probability of the 2nd call being wrong conditional on the best being wrong',\n    UQ: 'Phred likelihood of the segment, conditional on the mapping being correct',\n};\n","import React, { lazy } from 'react';\nimport FeatureDetails from '@jbrowse/core/BaseFeatureWidget/BaseFeatureDetail/FeatureDetails';\nimport { Paper } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport Flags from './Flags';\nimport Formatter from './Formatter';\nimport PairLink from './PairLink';\nimport { tags } from './tagInfo';\nimport { getTag } from './util';\nconst SupplementaryAlignments = lazy(() => import('./SupplementaryAlignments'));\nconst LinkedPairedAlignments = lazy(() => import('./LinkedPairedAlignments'));\nconst AlignmentsFeatureDetails = observer(function (props) {\n    const { model } = props;\n    const { featureData } = model;\n    const feat = structuredClone(featureData);\n    const SA = getTag('SA', feat);\n    const { flags } = feat;\n    return (React.createElement(Paper, { \"data-testid\": \"alignment-side-drawer\" },\n        React.createElement(FeatureDetails, { ...props, descriptions: { tags }, feature: feat, formatter: (value, key) => key === 'next_segment_position' ? (React.createElement(PairLink, { model: model, locString: value })) : (React.createElement(Formatter, { value: value })) }),\n        SA !== undefined ? (React.createElement(SupplementaryAlignments, { model: model, tag: SA, feature: feat })) : null,\n        flags & 1 ? (React.createElement(LinkedPairedAlignments, { model: model, feature: feat })) : null,\n        flags !== undefined ? React.createElement(Flags, { feature: feat, ...props }) : null));\n});\nexport default AlignmentsFeatureDetails;\n"],"file":"assets/AlignmentsFeatureDetail-BDj8Gdo3.js"}