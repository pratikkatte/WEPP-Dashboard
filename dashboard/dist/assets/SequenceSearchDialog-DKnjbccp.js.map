{"version":3,"file":"SequenceSearchDialog-DKnjbccp.js","sources":["../node_modules/@jbrowse/plugin-linear-genome-view/esm/LinearGenomeView/components/SequenceSearchDialog.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Dialog } from '@jbrowse/core/ui';\nimport { getSession, isSessionWithAddTracks } from '@jbrowse/core/util';\nimport { Button, Checkbox, DialogActions, DialogContent, FormControlLabel, FormGroup, TextField, Typography, } from '@mui/material';\nimport { observer } from 'mobx-react';\nimport { getSnapshot } from 'mobx-state-tree';\nimport { makeStyles } from 'tss-react/mui';\nconst useStyles = makeStyles()({\n    dialogContent: {\n        width: '40em',\n    },\n});\nconst SequenceSearchDialog = observer(function ({ model, handleClose, }) {\n    const { classes } = useStyles();\n    const [value, setValue] = useState('');\n    const [searchForward, setSearchForward] = useState(true);\n    const [searchReverse, setSearchReverse] = useState(true);\n    const [caseInsensitive, setCaseInsensitive] = useState(true);\n    let error;\n    try {\n        new RegExp(value);\n    }\n    catch (e) {\n        error = e;\n    }\n    return (React.createElement(Dialog, { maxWidth: \"xl\", open: true, onClose: handleClose, title: \"Sequence search\" },\n        React.createElement(DialogContent, { className: classes.dialogContent },\n            React.createElement(Typography, null, \"Supply a sequence to search for. A track will be created with the resulting matches once submitted. You can also supply regex style expressions e.g. AACT(C|T).\"),\n            React.createElement(TextField, { value: value, onChange: e => {\n                    setValue(e.target.value);\n                }, helperText: \"Sequence search pattern\" }),\n            React.createElement(FormGroup, null,\n                React.createElement(FormControlLabel, { control: React.createElement(Checkbox, { checked: searchForward, onChange: event => {\n                            setSearchForward(event.target.checked);\n                        } }), label: \"Search forward strand\" }),\n                React.createElement(FormControlLabel, { control: React.createElement(Checkbox, { checked: searchReverse, onChange: event => {\n                            setSearchReverse(event.target.checked);\n                        } }), label: \"Search reverse strand\" }),\n                React.createElement(FormControlLabel, { control: React.createElement(Checkbox, { checked: caseInsensitive, onChange: event => {\n                            setCaseInsensitive(event.target.checked);\n                        } }), label: \"Case insensitive\" })),\n            error ? React.createElement(Typography, { color: \"error\" }, `${error}`) : null),\n        React.createElement(DialogActions, null,\n            React.createElement(Button, { onClick: () => {\n                    var _a;\n                    if (value) {\n                        const trackId = `sequence_search_${+Date.now()}`;\n                        const session = getSession(model);\n                        const { assemblyManager } = session;\n                        const assemblyName = model.assemblyNames[0];\n                        if (isSessionWithAddTracks(session)) {\n                            session.addTrackConf({\n                                trackId,\n                                name: `Sequence search ${value}`,\n                                assemblyNames: [assemblyName],\n                                type: 'FeatureTrack',\n                                adapter: {\n                                    type: 'SequenceSearchAdapter',\n                                    search: value,\n                                    searchForward,\n                                    searchReverse,\n                                    caseInsensitive,\n                                    sequenceAdapter: getSnapshot((_a = assemblyManager.get(assemblyName)) === null || _a === void 0 ? void 0 : _a.configuration.sequence.adapter),\n                                },\n                            });\n                            model.showTrack(trackId);\n                        }\n                    }\n                    handleClose();\n                }, variant: \"contained\", color: \"primary\" }, \"Submit\"),\n            React.createElement(Button, { onClick: () => {\n                    handleClose();\n                }, variant: \"contained\", color: \"secondary\" }, \"Close\"))));\n});\nexport default SequenceSearchDialog;\n"],"names":["useStyles","makeStyles","SequenceSearchDialog","observer","model","handleClose","classes","value","setValue","useState","searchForward","setSearchForward","searchReverse","setSearchReverse","caseInsensitive","setCaseInsensitive","error","e","React","Dialog","DialogContent","Typography","TextField","FormGroup","FormControlLabel","Checkbox","event","DialogActions","Button","_a","trackId","session","getSession","assemblyManager","assemblyName","isSessionWithAddTracks","getSnapshot"],"mappings":"8IAOA,MAAMA,EAAYC,EAAU,EAAG,CAC3B,cAAe,CACX,MAAO,MACV,CACL,CAAC,EACKC,EAAuBC,EAAS,SAAU,CAAE,MAAAC,EAAO,YAAAC,CAAW,EAAK,CACrE,KAAM,CAAE,QAAAC,CAAS,EAAGN,EAAW,EACzB,CAACO,EAAOC,CAAQ,EAAIC,EAAAA,SAAS,EAAE,EAC/B,CAACC,EAAeC,CAAgB,EAAIF,EAAAA,SAAS,EAAI,EACjD,CAACG,EAAeC,CAAgB,EAAIJ,EAAAA,SAAS,EAAI,EACjD,CAACK,EAAiBC,CAAkB,EAAIN,EAAAA,SAAS,EAAI,EAC3D,IAAIO,EACJ,GAAI,CACA,IAAI,OAAOT,CAAK,CACxB,OACWU,EAAG,CACND,EAAQC,CAChB,CACI,OAAQC,EAAM,cAAcC,EAAM,OAAE,CAAE,SAAU,KAAM,KAAM,GAAM,QAASd,EAAa,MAAO,iBAAmB,EAC9Ga,EAAM,cAAcE,EAAe,CAAE,UAAWd,EAAQ,aAAe,EACnEY,EAAM,cAAcG,EAAY,KAAM,iKAAiK,EACvMH,EAAM,cAAcI,EAAW,CAAE,MAAOf,EAAO,SAAUU,GAAK,CACtDT,EAASS,EAAE,OAAO,KAAK,CAC3C,EAAmB,WAAY,0BAA2B,EAC9CC,EAAM,cAAcK,EAAW,KAC3BL,EAAM,cAAcM,EAAkB,CAAE,QAASN,EAAM,cAAcO,EAAU,CAAE,QAASf,EAAe,SAAUgB,GAAS,CAChHf,EAAiBe,EAAM,OAAO,OAAO,CACjE,EAA2B,EAAG,MAAO,wBAAyB,EAC9CR,EAAM,cAAcM,EAAkB,CAAE,QAASN,EAAM,cAAcO,EAAU,CAAE,QAASb,EAAe,SAAUc,GAAS,CAChHb,EAAiBa,EAAM,OAAO,OAAO,CACjE,EAA2B,EAAG,MAAO,wBAAyB,EAC9CR,EAAM,cAAcM,EAAkB,CAAE,QAASN,EAAM,cAAcO,EAAU,CAAE,QAASX,EAAiB,SAAUY,GAAS,CAClHX,EAAmBW,EAAM,OAAO,OAAO,CAC1C,CAAA,CAAE,EAAG,MAAO,kBAAkB,CAAE,CAAC,EAC9CV,EAAQE,EAAM,cAAcG,EAAY,CAAE,MAAO,OAAS,EAAE,GAAGL,CAAK,EAAE,EAAI,IAAI,EAClFE,EAAM,cAAcS,EAAe,KAC/BT,EAAM,cAAcU,EAAQ,CAAE,QAAS,IAAM,CACrC,IAAIC,EACJ,GAAItB,EAAO,CACP,MAAMuB,EAAU,mBAAmB,CAAC,KAAK,IAAK,CAAA,GACxCC,EAAUC,EAAU,WAAC5B,CAAK,EAC1B,CAAE,gBAAA6B,CAAe,EAAKF,EACtBG,EAAe9B,EAAM,cAAc,CAAC,EACtC+B,EAAAA,uBAAuBJ,CAAO,IAC9BA,EAAQ,aAAa,CACjB,QAAAD,EACA,KAAM,mBAAmBvB,CAAK,GAC9B,cAAe,CAAC2B,CAAY,EAC5B,KAAM,eACN,QAAS,CACL,KAAM,wBACN,OAAQ3B,EACR,cAAAG,EACA,cAAAE,EACA,gBAAAE,EACA,gBAAiBsB,GAAaP,EAAKI,EAAgB,IAAIC,CAAY,KAAO,MAAQL,IAAO,OAAS,OAASA,EAAG,cAAc,SAAS,OAAO,CAC/I,CACjC,CAA6B,EACDzB,EAAM,UAAU0B,CAAO,EAEnD,CACoBzB,EAAa,CAChB,EAAE,QAAS,YAAa,MAAO,SAAS,EAAI,QAAQ,EACzDa,EAAM,cAAcU,EAAQ,CAAE,QAAS,IAAM,CACrCvB,EAAa,CACjC,EAAmB,QAAS,YAAa,MAAO,WAAa,EAAE,OAAO,CAAC,CAAC,CACxE,CAAC","x_google_ignoreList":[0]}